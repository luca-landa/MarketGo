<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>

    <title>MarketGo</title>

    <link rel="icon" href="/favicon.ico" type="image/x-icon"/>
    <link type="text/css" rel="stylesheet" href="/stylesheets/app.css"/>
    <link type="text/css" rel="stylesheet" href="/stylesheets/palmar.css"/>
    <link type="text/css" rel="stylesheet" href="/stylesheets/shelf.css"/>
    <link type="text/css" rel="stylesheet" href="/stylesheets/product.css"/>

    <!--<script type="text/javascript" src="/javascript/vue.min.js"></script>-->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>
    <script type="text/javascript" src="/javascript/app.js"></script>
</head>
<body>

<div id="app" v-cloak>

    <img src="/market-go-logo-new-ext2.png" class="main-logo"/>
    <div class="tab-selectors">

        <button :class="{'tab-link': true, 'active': (visibleTab === 'client-view')}"
                @click="visibleTab = 'client-view'">Client view
        </button>
        <button :class="{'tab-link': true, 'active': (visibleTab === 'staff-view')}"
                @click="visibleTab = 'staff-view'">Staff view
        </button>
    </div>

    <div class="devices-group">
        <div class="device shelf" v-for="shelf in devices.shelves">
            <label class="device-label">Shelf {{shelf.idx}}</label>
            <div v-for="index in shelf.quantity" class="product" @dragenter="dragEnter($event, shelf.product.idx)"
                 @dragleave="dragLeave($event)">
                {{shelf.product.name}}
            </div>
            <div class="buttons" :hidden="visibleTab !== 'staff-view'">
                <button @click="updateShelf(shelf, shelf.quantity + 1)">+</button>
            </div>
        </div>
        <div id="client-view" :hidden="visibleTab !== 'client-view'">
            <client-palmar :palmar="devices.clientPalmar"></client-palmar>
        </div>
        <div id="staff-view" :hidden="visibleTab !== 'staff-view'">
            <div class="devices-group">
                <palmar class="device palmar" v-for="palmar in devices.staffPalmars" :palmar="palmar"
                        :key="palmar.idx"></palmar>
            </div>
        </div>
    </div>

</div>

<div class="waiting-spinner"></div>

</body>
</html>