<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>

    <title>MarketGo</title>

    <link rel="icon" href="/favicon.ico" type="image/x-icon"/>
    <link type="text/css" rel="stylesheet" href="/stylesheets/app.css"/>
    <link type="text/css" rel="stylesheet" href="/stylesheets/palmar.css"/>
    <link type="text/css" rel="stylesheet" href="/stylesheets/shelf.css"/>
    <link type="text/css" rel="stylesheet" href="/stylesheets/product.css"/>

    <script type="text/javascript" src="/javascript/vue.min.js"></script>
    <script type="text/javascript" src="/javascript/app.js"></script>
</head>
<body>

<div id="app" v-cloak>

    <img src="/market-go-logo-new-ext2.png" class="main-logo"/>
    <div class="tab-selectors">

        <button :class="{'tab-link': true, 'active': (visibleTab === 'client-view')}"
                @click="visibleTab = 'client-view'">Client view
        </button>
        <button :class="{'tab-link': true, 'active': (visibleTab === 'staff-view')}"
                @click="visibleTab = 'staff-view'">Staff view
        </button>
    </div>

    <div id="client-view" :hidden="visibleTab !== 'client-view'">

        <div class="devices-group">
            <div class="device shelf" v-for="shelf in devices.shelves">
                <label class="device-label">Shelf {{shelf.idx}}</label>
                <!--<input :value="'Quantity: ' + shelf.quantity" readonly/>-->
                <div v-for="index in shelf.quantity" class="product" @dragenter="dragEnter($event, shelf.product.idx)">
                    {{shelf.product.name}}
                </div>
                <!--<div class="buttons">-->
                    <!--<button @click="updateShelf(shelf, shelf.quantity - 1)">-</button>-->
                    <!--<button @click="updateShelf(shelf, shelf.quantity + 1)">+</button>-->
                <!--</div>-->
            </div>

            <div id="client-palmar" class="device palmar" draggable="true" @dragstart="dragStart($event)" @dragend="dragEnd($event)">
                <label class="palmar-label">{{devices.clientPalmar.name}}'s palmar</label>
                <div class="display">
                    <div class="notification">
                        <h4 class="palmar-message">Logged in as {{devices.clientPalmar.name}}</h4>
                    </div>
                    <div class="notification" v-for="notification in devices.clientPalmar.notifications">
                        <p class="palmar-message">Name: {{notification.name}}</p>
                        <p class="palmar-message">Price: {{notification.price}}</p>
                    </div>

                    <button class="palmar-gui-button error" @click="sendHelpRequest(devices.clientPalmar)">ask for help</button>
                </div>
                <div class="home-button"></div>
            </div>

        </div>
    </div>

    <div id="staff-view" :hidden="visibleTab !== 'staff-view'">
        <div class="devices-group">
            <palmar class="device palmar" v-for="palmar in devices.staffPalmars" :palmar="palmar"></palmar>
        </div>
    </div>
</div>

<div class="waiting-spinner"></div>

</body>
</html>